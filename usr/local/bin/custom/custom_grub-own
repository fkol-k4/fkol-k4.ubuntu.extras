#!/bin/bash

#   Filename    :   custom_grub-own
#   Filetype    :   Bash shell script
#   Comment     :   install GRUB2 on every disk
#   Description :   Updates GRUB2 configuration, then scans all of the 
#                   computer's SCSI disks and ask if the user wants to install
#                   Ubuntu's GRUB2 to each one of them.

# Clear terminal screen
clear

# Update GRUB2 configuration (bios && EFI installations)
[[ -f  /boot/grub/grub.cfg ]] && sudo grub-mkconfig -o /boot/grub/grub.cfg
##  Update GRUB2 configuration for EFI installations
##  Activate **** only if explicitely needed ****
#[[ -f  /boot/efi/EFI/ubuntu/grub.cfg ]] && sudo grub-mkconfig -o /boot/efi/EFI/ubuntu/grub.cfg

# GRUB2 installation procedure
for disk in /dev/sd?; do
    echo -e "
GRUB2 configuration is updated. Do you want to install GRUB2 to \033[1m
$disk\033[0m ?
Type \033[1my\033[0m to install, or any other key to skip.
Press Ctrl + C to exit this program."
    read -p "Type here: " grub_install_answer
    if [[ $grub_install_answer == y ]]; then
        sudo grub-install --recheck "$disk"
    else
        echo -e "Ok $USER, skipping this disk..."
    fi
done
