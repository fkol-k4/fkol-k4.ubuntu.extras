#!/bin/bash

#   Filename    :   custom_daily-iso-sync
#   Filetype    :   Bash shell script
#   Description :   Syncs daily Iso images for Ubuntu && flavours.
#   Comment     :   iso sync script

#   CHECK IF ZSYNC IS INSTALLED, NOTIFY AND EXIT IF NOT.
if ! [[ `which zsync` ]]; then
    [[ `which notify-send` ]] && notify-send -t 4000 "This script requires zsync. Install it and try again."
    echo -e "This script requires zsync to run, but it is not installed.
You can install zsync with the command \e[1m
sudo apt-get install zsync \e[0m"
    sleep 8
    exit
fi

#   DEFINE ISO DIRECTORY PATH 
ISO_PATH="/Files/Downloads_Subvolume/Linux/Distro-isos/Ubuntu"

##  CHANGE TO WORK DIRECTORY - PRECISE PANGOLIN
#   Precise daily DVDs
if [ -d "$ISO_PATH"/Precise_Pangolin ]; then
    cd /"$ISO_PATH"/Precise_Pangolin/
else
    mkdir -p /"$ISO_PATH"/Precise_Pangolin
    cd /"$ISO_PATH"/Precise_Pangolin/
fi
zsync -i Ubuntu-desktop_Precise_DVD-amd64.iso -o Ubuntu-desktop_Precise_DVD-amd64.iso http://cdimage.ubuntu.com/precise/dvd/current/precise-dvd-amd64.iso.zsync
zsync -i Ubuntu-desktop_Precise_DVD-i386.iso -o Ubuntu-desktop_Precise_DVD-i386.iso http://cdimage.ubuntu.com/precise/dvd/current/precise-dvd-i386.iso.zsync
sync
rm -rf *.zs-old

##  CHANGE TO WORK DIRECTORY - TRUSTY TAHR
#   Utopic daily ISOs
if [ -d /"$ISO_PATH"/Trusty_Tahr ]; then
    cd /"$ISO_PATH"/Trusty_Tahr/
else
    mkdir -p /"$ISO_PATH"/Trusty_Tahr
    cd /"$ISO_PATH"/Trusty_Tahr/
fi
#   1. Ubuntu (Unity)
zsync -i Ubuntu-14.04-desktop-amd64.iso -o Ubuntu-14.04-desktop-amd64.iso http://cdimage.ubuntu.com/trusty/daily-live/current/trusty-desktop-amd64.iso.zsync
zsync -i Ubuntu-14.04-desktop-i386.iso -o Ubuntu-14.04-desktop-i386.iso http://cdimage.ubuntu.com/trusty/daily-live/current/trusty-desktop-i386.iso.zsync
sync
rm -rf *.zs-old
#   2. Kubuntu (Ubuntu on KDE)
zsync -i Kubuntu-14.04-desktop-amd64.iso -oi Kubuntu-14.04-desktop-amd64.iso http://cdimage.ubuntu.com/kubuntu/trusty/daily-live/current/trusty-desktop-amd64.iso
zsync -i Kubuntu-14.04-desktop-i386.iso -o Kubuntu-14.04-desktop-i386.iso http://cdimage.ubuntu.com/kubuntu/trusty/daily-live/current/trusty-desktop-i386.iso.zsync
sync
rm -rf *.zs-old

##  CHANGE TO WORK DIRECTORY - UTOPIC UNICORN
#   Utopic daily ISOs
if [ -d /"$ISO_PATH"/Utopic_Unicorn ]; then
    cd /"$ISO_PATH"/Utopic_Unicorn/
else
    mkdir -p /"$ISO_PATH"/Utopic_Unicorn
    cd /"$ISO_PATH"/Utopic_Unicorn/
fi
#   1. Ubuntu (Unity)
zsync -i Ubuntu-Desktop_Utopic-amd64.iso -o Ubuntu-Desktop_Utopic-amd64.iso http://cdimage.ubuntu.com/daily-live/current/utopic-desktop-amd64.iso.zsync
zsync -i Ubuntu-Desktop_Utopic-i386.iso -o Ubuntu-Desktop_Utopic-i386.iso http://cdimage.ubuntu.com/daily-live/current/utopic-desktop-i386.iso.zsync
sync
rm -rf *.zs-old
#   2. Kubuntu (Ubuntu on KDE)
zsync -i Kubuntu-Utopic-amd64.iso -o Kubuntu-Utopic-amd64.iso http://cdimage.ubuntu.com/kubuntu/daily-live/current/utopic-desktop-amd64.iso.zsync
zsync -i Kubuntu-Utopic-i386.iso -o Kubuntu-Utopic-i386.iso http://cdimage.ubuntu.com/kubuntu/daily-live/current/utopic-desktop-i386.iso.zsync
sync
rm -rf *.zs-old
#   3. Xubuntu (Ubuntu on XFCE)
zsync -i Xubuntu-Utopic-amd64.iso -o Xubuntu-Utopic-amd64.iso http://cdimage.ubuntu.com/xubuntu/daily-live/current/utopic-desktop-amd64.iso.zsync
zsync -i Xubuntu-Utopic-i386.iso -o Xubuntu-Utopic-i386.iso http://cdimage.ubuntu.com/xubuntu/daily-live/current/utopic-desktop-i386.iso.zsync
sync
rm -rf *.zs-old
#   4. Lubuntu (Ubuntu on LXDE)
zsync -i Lubuntu-Utopic-amd64.iso -o Lubuntu-Utopic-amd64.iso http://cdimage.ubuntu.com/lubuntu/daily-live/current/utopic-desktop-amd64.iso.zsync
zsync -i Lubuntu-Utopic-i386.iso -o Lubuntu-Utopic-i386.iso http://cdimage.ubuntu.com/lubuntu/daily-live/current/utopic-desktop-i386.iso.zsync
sync
rm -rf *.zs-old
#   5. Ubuntu-Next (Mir display manager && Unity 8)
zsync -i Ubuntu-Next-Utopic-amd64.iso -o Ubuntu-Next-Utopic-amd64.iso http://cdimage.ubuntu.com/ubuntu-desktop-next/daily-live/current/utopic-desktop-amd64.iso.zsync
zsync -i Ubuntu-Next-Utopic-i386.iso -o Ubuntu-Next-Utopic-i386.iso http://cdimage.ubuntu.com/ubuntu-desktop-next/daily-live/current/utopic-desktop-i386.iso.zsync
sync
rm -rf *.zs-old

##  USER INPUT TO EXIT SCRIPT
echo '

    Iso images synchronization is finished.

    Press any button to terminate this script.
'
#   Send notification ** if possible **
if [ `which notify-send` ]; then
    notify-send -i  /usr/share/icons/custom/donkey.svg -t 3000  "Script completed. Please check your terminal"
fi

# -s: do not echo input character
# -n 1: read only 1 character (separate with space)
read -s -n 1 key
clear
echo "
    Key pressed!

The terminal window will close in four (4) seconds."
echo "
    See you next time" $USER
sleep 4

exit

